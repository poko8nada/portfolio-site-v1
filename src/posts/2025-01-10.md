---
title: GA4とGTMでアクセスフィルタを実装しようblog-format
createdAt: 2025-01-10
updatedAt: 2025-01-10
version : 1
thumbnail: /images/posts/pc01.svg
isPublished: false
---
## はじめに
ポートフォリオサイトを新しく立ち上げたので、[GA4(グーグルアナリティクス)](https://developers.google.com/analytics/devguides/collection/ga4)と[GTM(グーグルタグマネージャー)](https://developers.google.com/tag-manager/)を導入しました。

導入そのものはとても簡単だったのですが、特定のアクセスを除外するフィルタ設定で少しつまずいたので、記事として残します。

## なぜGTM経由で実装するのか
### 後々を見越して…
今後新たなタグを埋め込む可能性を見越して、あらかじめGTMでタグを管理するのはメリットとして大きいです。

また、GA4単体での実装と労力的にも大差ないので、やっておくに越したことはありません。

### フィルタ設定の落とし穴
GA4は、IPアドレス指定による内部トラフィックの除外は実装されているようです。

```Link
[GA4] 内部トラフィックの除外 - アナリティクス ヘルプ
support.google.com
https://support.google.com/analytics/answer/10104470?hl=ja
```

ですが、ホスト名等での除外はできないようで、これは困りました(UA時代は、ビューによるフィルタがあった)



実際のところ、IPで除外できれば事足りるような気もします。

が、本番環境で実際にタグの発火(= GA4での計測)が、おこっているかの確認を行いたいとなるとちょっと面倒な仕様に感じます。
